<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Streaming Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@3.1.0/tsparticles.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            dark: '#0f172a',
            darker: '#020617',
            primary: '#0ea5e9',
            accent: '#8fff8f'
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            space: ['"Space Grotesk"', 'sans-serif']
          }
        }
      }
    }
  </script>
  <style>
    .glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    
    /* Hide scrollbar for Chrome/Safari */
    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }
    
    /* Hide scrollbar for Firefox/Edge */
    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    
    /* Fade in animation */
    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(10px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    
    .fade-in {
      animation: fadeIn 0.5s forwards;
    }

    /* Tab transition animations */
    .tab-content {
      transition: all 0.4s ease-in-out;
    }
    
    .tab-content.hidden {
      opacity: 0;
      transform: translateY(20px);
    }
    
    .tab-content.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* Swiper custom styles */
    .swiper-pagination-bullet {
      background: white !important;
      opacity: 0.5;
      width: 6px !important;
      height: 6px !important;
      margin: 0 4px !important;
    }
    
    .swiper-pagination-bullet-active {
      background: white !important;
      opacity: 1;
      width: 8px !important;
      height: 8px !important;
    }
    
    /* Movie card styles */
    .movie-card {
      transition: all 0.3s ease;
      position: relative;
    }

    .movie-card:hover {
      transform: translateY(-5px);
    }

    .movie-card .card-content {
      position: relative;
      overflow: hidden;
      background: rgba(31, 41, 55, 0.5);
    }

    .movie-card .card-content::before {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .movie-card:hover .card-content::before {
      opacity: 1;
    }

    .movie-card .card-info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 1rem;
      transform: translateY(100%);
      transition: transform 0.3s ease;
      z-index: 2;
    }

    .movie-card:hover .card-info {
      transform: translateY(0);
    }

    .movie-card .card-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: white;
    }

    .movie-card .card-meta {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.875rem;
    }

    .movie-card .card-actions {
      margin-top: 0.75rem;
      display: flex;
      justify-content: center;
    }

    .movie-card .watch-btn {
      width: auto;
      background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.2));
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      color: white;
      padding: 0.5rem 1rem;
      font-weight: 500;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      font-size: 0.875rem;
    }

    .movie-card .watch-btn:hover {
      transform: translateY(-2px);
      background: linear-gradient(45deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.3));
    }

    /* Star rating */
    .star-rating {
      color: gold;
    }
    
    /* Badge style */
    .badge {
      background: rgba(14, 165, 233, 0.2);
      border: 1px solid rgba(14, 165, 233, 0.3);
      color: #0ea5e9;
      font-size: 0.7rem;
      padding: 0.1rem 0.5rem;
      border-radius: 4px;
    }
    
    /* Swiper container sizing */
    .swiper {
      padding: 10px 0 30px 0 !important;
      margin: 0 !important;
      width: 100%;
    }

    .swiper-slide {
      width: 180px !important;
      margin-right: 16px !important;
      height: auto !important;
    }

    .swiper-wrapper {
      display: flex;
      align-items: stretch;
      padding-right: 16px;
    }

    /* Category folder styles */
    .category-folder {
      transition: all 0.3s ease;
    }

    .category-folder.expanded {
      margin-bottom: 1rem;
    }

    .category-folder-header {
      cursor: pointer;
      padding: 1rem;
      border-radius: 0.5rem;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
    }

    .category-folder-header:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .category-folder-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .category-folder.expanded .category-folder-content {
      max-height: 1000px;
    }

    /* Recent activity styles */
    .recent-activity {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 0.5rem;
      padding: 1rem;
    }

    .recent-activity-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.5rem;
      border-radius: 0.5rem;
      transition: background 0.3s ease;
    }

    .recent-activity-item:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    /* Watch button styles */
    .watch-btn {
      background: linear-gradient(45deg, #0ea5e9, #3b82f6);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-weight: 500;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .watch-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    /* Hero slider specific styles */
    .heroSwiper {
      height: 600px !important;
      margin: 0 !important;
      padding: 0 !important;
      position: relative;
      border-radius: 12px;
      overflow: hidden;
    }

    .heroSwiper .swiper-slide {
      width: 100% !important;
      margin: 0 !important;
      position: relative;
    }

    .heroSwiper .swiper-slide::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, 
        rgba(0,0,0,0.2) 0%, 
        rgba(0,0,0,0.4) 50%,
        rgba(0,0,0,0.8) 100%
      );
      z-index: 1;
    }

    .hero-content {
      position: relative;
      z-index: 2;
      padding: 3rem;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      max-width: 800px;
    }

    .hero-title {
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
      line-height: 1.1;
    }

    .hero-meta {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .hero-rating {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.25rem;
    }

    .hero-overview {
      font-size: 1.2rem;
      line-height: 1.6;
      margin-bottom: 2rem;
      opacity: 0.9;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }

    .hero-actions {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .hero-btn {
      padding: 0.75rem 1.75rem;
      font-weight: 600;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .hero-btn-primary {
      background: linear-gradient(45deg, #0ea5e9, #3b82f6);
      color: white;
      border: none;
    }

    .hero-btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
    }

    .hero-btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .hero-btn-secondary:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }

    /* Search dropdown styles */
    #searchDropdown {
      background: rgba(31, 41, 55, 0.95);
      backdrop-filter: blur(30px);
      -webkit-backdrop-filter: blur(30px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      max-height: 400px;
      overflow-y: auto;
      scrollbar-width: none;
      margin-top: 0.5rem;
      border-radius: 0;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    #searchDropdown::-webkit-scrollbar {
      display: none;
    }

    .search-result-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: background 0.3s ease;
    }

    .search-result-item:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .search-result-poster {
      width: 60px;
      height: 90px;
      object-fit: cover;
      border-radius: 0;
    }

    .search-result-info {
      flex: 1;
      min-width: 0;
    }

    .search-result-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .search-result-meta {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
      color: rgba(255, 255, 255, 0.7);
    }
    
    /* Info Modal Styles */
    .info-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      z-index: 100;
      display: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .info-modal.active {
      display: flex;
      opacity: 1;
    }

    .info-modal-content {
      background: rgba(31, 41, 55, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      max-width: 800px;
      width: 90%;
      margin: auto;
      position: relative;
      transform: translateY(20px);
      transition: transform 0.3s ease;
    }

    .info-modal.active .info-modal-content {
      transform: translateY(0);
    }

    .info-modal-header {
      padding: 1.5rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .info-modal-body {
      padding: 1.5rem;
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 1.5rem;
    }

    .info-modal-poster {
      border-radius: 0.5rem;
      overflow: hidden;
    }

    .info-modal-details {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .info-modal-genres {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .info-modal-genre {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      font-size: 0.75rem;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
    }

    /* Categories Tab Styles */
    .categories-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .category-card {
      background: rgba(31, 41, 55, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      overflow: hidden;
      transition: all 0.3s ease;
      position: relative;
    }

    .category-card:hover {
      transform: translateY(-5px);
      border-color: rgba(14, 165, 233, 0.5);
    }

    .category-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, transparent 50%, rgba(0, 0, 0, 0.8));
      z-index: 1;
    }

    .category-card-content {
      position: relative;
      z-index: 2;
      padding: 1.5rem;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
    }

    .category-card-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .category-card-description {
      font-size: 0.875rem;
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 1rem;
    }

    .category-card-meta {
      display: flex;
      gap: 1rem;
      font-size: 0.875rem;
      color: rgba(255, 255, 255, 0.5);
    }

    .recent-watches {
      background: rgba(31, 41, 55, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }

    .recent-watches-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .recent-watch-item {
      position: relative;
      border-radius: 0.5rem;
      overflow: hidden;
      aspect-ratio: 2/3;
    }

    .recent-watch-item::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, transparent 50%, rgba(0, 0, 0, 0.8));
      z-index: 1;
    }

    .recent-watch-info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 1rem;
      z-index: 2;
    }

    .recent-watch-title {
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    .recent-watch-date {
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.7);
    }

    /* Info button hover effect */
    .movie-card .details-btn {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      transition: all 0.3s ease;
    }

    .movie-card .details-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }

    /* Number badge styles */
    .number-badge {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      font-weight: 600;
    }

    /* Info modal styles */
    .info-modal {
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }

    .info-modal-content {
      background: rgba(31, 41, 55, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .info-modal-genre {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
    }

    /* Tab Navigation Styles */
    .tab-btn {
      position: relative;
      padding: 0.75rem 1.5rem;
      font-weight: 500;
      transition: all 0.3s ease;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      margin: 0 0.25rem;
    }

    .tab-btn:not(.bg-primary) {
      background: rgba(255, 255, 255, 0.05);
      color: rgba(255, 255, 255, 0.7);
    }

    .tab-btn:not(.bg-primary):hover {
      background: rgba(255, 255, 255, 0.1);
      color: white;
    }

    .tab-btn.bg-primary {
      background: linear-gradient(45deg, rgba(14, 165, 233, 0.8), rgba(59, 130, 246, 0.8));
      box-shadow: 0 4px 6px -1px rgba(14, 165, 233, 0.2);
    }

    /* Player Modal Styles */
    #playerModal {
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(30px);
      -webkit-backdrop-filter: blur(30px);
    }

    #playerModal .bg-gray-900\/95 {
      background: rgba(31, 41, 55, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    #playerModal #closePlayer {
      background: rgba(239, 68, 68, 0.8);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    #playerModal #closePlayer:hover {
      background: rgba(239, 68, 68, 1);
    }

    #playerModal select,
    #playerModal input {
      background: rgba(31, 41, 55, 0.8);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    #playerModal #updateEpisode {
      background: rgba(31, 41, 55, 0.8);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    #playerModal #updateEpisode:hover {
      background: rgba(31, 41, 55, 1);
    }

    /* Swiper Pagination Fixes */
    .swiper-pagination-bullet {
      width: 8px !important;
      height: 8px !important;
      background: rgba(255, 255, 255, 0.5) !important;
      opacity: 0.5 !important;
      margin: 0 4px !important;
      transition: all 0.3s ease !important;
    }

    .swiper-pagination-bullet-active {
      width: 10px !important;
      height: 10px !important;
      background: white !important;
      opacity: 1 !important;
    }

    /* Hero Swiper Fixes */
    .heroSwiper {
      height: 600px !important;
      margin: 0 !important;
      padding: 0 !important;
      position: relative;
      border-radius: 12px;
      overflow: hidden;
    }

    .heroSwiper .swiper-slide {
      width: 100% !important;
      margin: 0 !important;
      position: relative;
    }

    .heroSwiper .swiper-pagination {
      bottom: 20px !important;
      z-index: 10;
    }

    /* Update Hero Swiper Initialization */
    function initializeSwipers() {
      // Hero swiper
      swipers.hero = new Swiper('.heroSwiper', {
        slidesPerView: 1,
        spaceBetween: 0,
        centeredSlides: true,
        autoplay: {
          delay: 6000,
          disableOnInteraction: false,
          pauseOnMouseEnter: true
        },
        loop: true,
        effect: 'fade',
        fadeEffect: {
          crossFade: true
        },
        speed: 1500,
        observer: true,
        observeParents: true,
        preventInteractionOnTransition: true,
        watchSlidesProgress: true,
        watchSlidesVisibility: true
      });
      
      // ... rest of the swiper initializations ...
    }

    /* Update Player Modal HTML */
    <div id="playerModal" class="hidden fixed inset-0 z-50 flex flex-col">
      <div class="bg-gray-900/95 backdrop-blur-lg p-3 flex flex-wrap justify-between items-center gap-3 border-b border-gray-800">
        <button id="closePlayer" class="w-8 h-8 bg-red-600/80 hover:bg-red-600 flex items-center justify-center text-white font-bold transition-colors">&times;</button>
        <div id="playerTitle" class="flex-1 text-center text-white font-medium truncate px-4">Loading...</div>
        <div class="flex items-center gap-3">
          <div id="tvControls" class="hidden items-center gap-2">
            <span class="text-xs text-gray-400">S</span>
            <input type="number" id="seasonInput" min="1" value="1" class="w-14 py-1 px-2 bg-gray-800 rounded text-center text-white text-sm border border-gray-700">
            <span class="text-xs text-gray-400">E</span>
            <input type="number" id="episodeInput" min="1" value="1" class="w-14 py-1 px-2 bg-gray-800 rounded text-center text-white text-sm border border-gray-700">
            <button id="updateEpisode" class="bg-gray-800 hover:bg-gray-700 text-white py-1 px-3 text-sm transition-colors">▶</button>
          </div>
          <select id="sourceSelect" class="bg-gray-800 border border-gray-700 text-white text-sm"></select>
        </div>
      </div>
      <div class="flex-1 relative">
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="w-16 h-16 border-4 border-white rounded-full animate-spin border-t-transparent"></div>
        </div>
        <iframe sandbox="allow-scripts allow-same-origin allow-presentation" id="videoFrame" class="absolute inset-0 w-full h-full border-0" scrolling="no" allowfullscreen></iframe>
      </div>
    </div>

    <!-- Update Tab Navigation HTML -->
    <nav class="flex justify-center">
      <div class="inline-flex">
        <button id="tab-stream" class="tab-btn">Stream</button>
        <button id="tab-about" class="tab-btn">About</button>
        <button id="tab-projects" class="tab-btn">Projects</button>
        <button id="tab-status" class="tab-btn">Status</button>
      </div>
    </nav>
  </style>
  
</head>
<body class="bg-darker text-white min-h-screen">
  <div class="max-w-7xl mx-auto">
    <!-- Header Section with navigation tabs -->
    <header class="pt-6 pb-2 px-4 relative">
      <!-- Top navigation -->
      <div class="flex justify-between items-center mb-8">
        <!-- Tab Navigation - Replaced MovieStream -->
        <nav class="flex justify-center">
          <div class="inline-flex">
            <button id="tab-stream" class="tab-btn">Stream</button>
            <button id="tab-about" class="tab-btn">About</button>
            <button id="tab-projects" class="tab-btn">Projects</button>
            <button id="tab-status" class="tab-btn">Status</button>
          </div>
        </nav>
        
        <!-- Social links -->
        <div class="flex gap-4 justify-center">
          <a href="https://www.instagram.com/pranv_satv/" target="_blank" class="opacity-70 hover:opacity-100 transition-opacity">
            <img src="https://img.icons8.com/ios-filled/22/ffffff/instagram-new.png" alt="Instagram">
          </a>
          <a href="https://www.linkedin.com/in/pranav-satav-b187102a5/" target="_blank" class="opacity-70 hover:opacity-100 transition-opacity">
            <img src="https://img.icons8.com/ios-filled/22/ffffff/linkedin.png" alt="LinkedIn">
          </a>
          <a href="https://github.com/PranavSatav" target="_blank" class="opacity-70 hover:opacity-100 transition-opacity">
            <img src="https://img.icons8.com/ios-glyphs/22/ffffff/github.png" alt="GitHub">
          </a>
        </div>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="px-4 pb-12 relative z-10">
      <!-- Stream Tab Content -->
      <section id="content-stream" class="tab-content visible">
        <!-- Hero Slider Section -->
        <div class="mb-10 mt-2">
          <div class="swiper heroSwiper">
            <div class="swiper-wrapper">
              <!-- Slider items will be added dynamically -->
            </div>
            <div class="swiper-pagination"></div>
          </div>
        </div>
        
        <!-- Search and Filters -->
        <div class="mb-8 flex flex-wrap gap-3 items-center justify-between">
          <div class="relative flex-grow max-w-xl">
            <input type="text" id="movieSearchInput" class="w-full py-2.5 px-5 pl-10 rounded-full bg-gray-800/60 border border-gray-700 text-white focus:ring-2 focus:ring-primary focus:border-primary outline-none" placeholder="Search Movies / Series / TV Shows...">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 absolute left-3 top-3 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
            <div id="searchDropdown" class="absolute z-50 w-full mt-2 bg-gray-800/95 rounded-lg shadow-lg border border-gray-700 hidden max-h-96 overflow-y-auto">
              <!-- Search results will be populated here -->
            </div>
          </div>
          
          <div class="flex gap-2">
            <select id="typeFilter" class="bg-gray-800/60 border border-gray-700 text-white py-2 px-3 rounded-lg text-sm">
              <option value="all">All Types</option>
              <option value="movie">Movies Only</option>
              <option value="tv">TV Shows Only</option>
            </select>
            
            <select id="genreFilter" class="bg-gray-800/60 border border-gray-700 text-white py-2 px-3 rounded-lg text-sm">
              <option value="all">All Genres</option>
              <option value="28">Action</option>
              <option value="12">Adventure</option>
              <option value="16">Animation</option>
              <option value="35">Comedy</option>
              <option value="80">Crime</option>
              <option value="99">Documentary</option>
              <option value="18">Drama</option>
              <option value="10751">Family</option>
              <option value="14">Fantasy</option>
              <option value="36">History</option>
              <option value="27">Horror</option>
              <option value="10402">Music</option>
              <option value="9648">Mystery</option>
              <option value="10749">Romance</option>
              <option value="878">Science Fiction</option>
              <option value="53">Thriller</option>
              <option value="10752">War</option>
              <option value="37">Western</option>
            </select>
            
            <select id="sortFilter" class="bg-gray-800/60 border border-gray-700 text-white py-2 px-3 rounded-lg text-sm">
              <option value="popularity.desc">Popularity</option>
              <option value="vote_average.desc">Rating</option>
              <option value="release_date.desc">Newest</option>
              <option value="release_date.asc">Oldest</option>
            </select>
          </div>
        </div>
        
        <!-- Top 10 Picks Section -->
        <div class="mb-10">
          <h2 class="text-2xl font-bold mb-4 flex items-center">
            <span class="mr-2 text-primary">#</span>Top 10 Picks
          </h2>
          <div class="swiper top10Swiper">
            <div class="swiper-wrapper" id="top10Container"></div>
            <div class="swiper-button-next text-white"></div>
            <div class="swiper-button-prev text-white"></div>
          </div>
        </div>
        
        <!-- Trending Now Section -->
        <div class="mb-10">
          <h2 class="text-2xl font-bold mb-4">
            <span class="text-primary">🔥</span> Trending Now
          </h2>
          <div class="swiper trendingSwiper">
            <div class="swiper-wrapper" id="trendingContainer"></div>
            <div class="swiper-button-next text-white"></div>
            <div class="swiper-button-prev text-white"></div>
          </div>
        </div>
        
        <!-- New Releases Section -->
        <div class="mb-10">
          <h2 class="text-2xl font-bold mb-4">
            <span class="text-primary">✨</span> New Releases
          </h2>
          <div class="swiper newReleasesSwiper">
            <div class="swiper-wrapper" id="newReleasesContainer"></div>
            <div class="swiper-button-next text-white"></div>
            <div class="swiper-button-prev text-white"></div>
          </div>
        </div>
        
        <!-- Horror Section -->
        <div class="mb-10">
          <h2 class="text-2xl font-bold mb-4">
            <span class="text-primary">👻</span> Horror Movies
          </h2>
          <div class="swiper horrorSwiper">
            <div class="swiper-wrapper" id="horrorContainer"></div>
            <div class="swiper-button-next text-white"></div>
            <div class="swiper-button-prev text-white"></div>
          </div>
        </div>
        
        <!-- Anime Section -->
        <div class="mb-10">
          <h2 class="text-2xl font-bold mb-4">
            <span class="text-primary">🎌</span> Anime
          </h2>
          <div class="swiper animeSwiper">
            <div class="swiper-wrapper" id="animeContainer"></div>
            <div class="swiper-button-next text-white"></div>
            <div class="swiper-button-prev text-white"></div>
          </div>
        </div>
        
        <!-- Search Results -->
        <div id="searchResultsSection" class="mb-10 hidden">
          <h2 class="text-2xl font-bold mb-4">Search Results</h2>
          <div id="movieGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 justify-center"></div>
        </div>
        
        <!-- Random Movie Fact Card -->
        <div class="glass border border-gray-700/50 rounded-xl p-6 mb-8">
          <h3 class="text-lg font-medium mb-2 text-accent">Did you know?</h3>
          <p id="randomMovieFact" class="text-gray-300 text-sm">Loading a random movie fact...</p>
        </div>
      </section>

      <!-- About Tab Content -->
      <section id="content-about" class="tab-content hidden">
        <div class="glass border border-gray-700/50 rounded-xl p-6 mb-8">
          <h2 class="text-accent font-space text-2xl mb-4">About Me</h2>
          <p class="text-gray-300 leading-relaxed">
            I'm a full-stack developer, cloud tinkerer, and digital craftsman who believes <strong>code should be functional *and* fun</strong>.
            Whether it's wrangling APIs, optimizing infrastructure, or making buttons go brr—I'm your dev.
          </p>
          <p class="text-gray-300 leading-relaxed mt-4">
            Currently building things that (hopefully) don't crash.
          </p>
          
          <div class="mt-6 pt-6 border-t border-gray-700/50">
            <a href="https://cloud.pranavsatav.me" target="_blank" class="inline-flex items-center text-primary hover:underline">
              <span>Access NextCloud ↗</span>
            </a>
          </div>
        </div>
      </section>

      <!-- Projects Tab Content -->
      <section id="content-projects" class="tab-content hidden">
        <h2 class="text-accent font-space text-2xl mb-6">Featured Projects</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="glass border border-gray-700/50 rounded-xl p-5 hover:border-accent transition-colors cursor-pointer hover:translate-y-[-2px] duration-300">
            <h3 class="text-accent font-space text-lg mb-2">M3U Playlist Checker</h3>
            <p class="text-gray-300 text-sm">Upload, validate, re-check, and stream. It's like CPR for dead IPTV links.</p>
          </div>

          <div class="glass border border-gray-700/50 rounded-xl p-5 hover:border-accent transition-colors cursor-pointer hover:translate-y-[-2px] duration-300">
            <h3 class="text-accent font-space text-lg mb-2">Telegram Video Streamer</h3>
            <p class="text-gray-300 text-sm">HTML5 video player + Telegram = seamless privacy-first streaming.</p>
          </div>

          <div class="glass border border-gray-700/50 rounded-xl p-5 hover:border-accent transition-colors cursor-pointer hover:translate-y-[-2px] duration-300">
            <h3 class="text-accent font-space text-lg mb-2">IoT + SDN = Secure Chaos</h3>
            <p class="text-gray-300 text-sm">Made IOTA 2.0 and SDN shake hands to secure IoT networks. Surprisingly polite handshake.</p>
          </div>

          <div class="glass border border-gray-700/50 rounded-xl p-5 hover:border-accent transition-colors cursor-pointer hover:translate-y-[-2px] duration-300">
            <h3 class="text-accent font-space text-lg mb-2">LocalStack EC2 Wizard</h3>
            <p class="text-gray-300 text-sm">Create and test EC2 instances locally. It's like AWS... but in your hoodie.</p>
          </div>
        </div>
      </section>
      
      <!-- Status Tab Content -->
      <section id="content-status" class="tab-content hidden">
        <div class="max-w-4xl mx-auto">
          <!-- Status Overview -->
          <div class="glass border border-gray-700/50 rounded-xl p-6 mb-8">
            <div class="flex items-center justify-between mb-6">
              <h2 class="text-2xl font-bold">System Status</h2>
              <div class="flex items-center gap-2">
                <span class="text-sm text-gray-400">Last updated:</span>
                <span id="last-updated" class="text-sm font-medium">Just now</span>
              </div>
            </div>
            
            <!-- Status Bar -->
            <div class="relative h-4 bg-gray-800/50 rounded-full overflow-hidden mb-6">
              <div id="status-bar" class="absolute inset-0 bg-gradient-to-r from-green-500 to-green-400 transition-all duration-1000"></div>
              <div class="absolute inset-0 bg-gradient-to-r from-red-500 to-red-400 transition-all duration-1000 hidden"></div>
              <div class="absolute inset-0 bg-gradient-to-r from-yellow-500 to-yellow-400 transition-all duration-1000 hidden"></div>
            </div>
            
            <!-- Status Details -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="glass border border-gray-700/50 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <div id="cloud-status-indicator" class="w-2 h-2 rounded-full bg-gray-500"></div>
                  <h3 class="font-medium">Cloud Server</h3>
                </div>
                <p class="text-sm text-gray-400">Main cloud infrastructure</p>
                <div class="mt-2 text-sm">
                  <div class="flex justify-between">
                    <span class="text-gray-400">IP Address:</span>
                    <span id="server-ip" class="font-medium">Checking...</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-400">Response Time:</span>
                    <span id="response-time" class="font-medium">Checking...</span>
                  </div>
                </div>
              </div>
              
              <div class="glass border border-gray-700/50 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <div id="api-status-indicator" class="w-2 h-2 rounded-full bg-gray-500"></div>
                  <h3 class="font-medium">TMDB API</h3>
                </div>
                <p class="text-sm text-gray-400">Movie database API</p>
                <div class="mt-2 text-sm">
                  <div class="flex justify-between">
                    <span class="text-gray-400">Status:</span>
                    <span id="tmdb-status" class="font-medium">Checking...</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-400">Latency:</span>
                    <span id="tmdb-latency" class="font-medium">Checking...</span>
                  </div>
                </div>
              </div>
              
              <div class="glass border border-gray-700/50 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <div id="cdn-status-indicator" class="w-2 h-2 rounded-full bg-gray-500"></div>
                  <h3 class="font-medium">CDN Network</h3>
                </div>
                <p class="text-sm text-gray-400">Content delivery network</p>
                <div class="mt-2 text-sm">
                  <div class="flex justify-between">
                    <span class="text-gray-400">Traffic Today:</span>
                    <span id="cdn-traffic" class="font-medium">Checking...</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-400">Active Users:</span>
                    <span id="active-users" class="font-medium">Checking...</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Service Status -->
          <div class="glass border border-gray-700/50 rounded-xl p-6 mb-8">
            <h3 class="text-xl font-bold mb-4">Service Status</h3>
            <div class="space-y-4">
              <div class="flex items-center justify-between p-4 rounded-lg bg-gray-800/30">
                <div class="flex items-center gap-3">
                  <div id="nextcloud-status" class="w-2 h-2 rounded-full bg-gray-500"></div>
                  <div>
                    <h4 class="font-medium">NextCloud</h4>
                    <p class="text-sm text-gray-400">File storage and sync service</p>
                  </div>
                </div>
                <div class="text-sm">
                  <span id="nextcloud-status-text" class="text-gray-400">Checking...</span>
                </div>
              </div>
              
              <div class="flex items-center justify-between p-4 rounded-lg bg-gray-800/30">
                <div class="flex items-center gap-3">
                  <div id="streaming-status" class="w-2 h-2 rounded-full bg-gray-500"></div>
                  <div>
                    <h4 class="font-medium">Streaming API</h4>
                    <p class="text-sm text-gray-400">Content delivery network for media</p>
                  </div>
                </div>
                <div class="text-sm">
                  <span id="streaming-status-text" class="text-gray-400">Checking...</span>
                </div>
              </div>
              
              <div class="flex items-center justify-between p-4 rounded-lg bg-gray-800/30">
                <div class="flex items-center gap-3">
                  <div id="analytics-status" class="w-2 h-2 rounded-full bg-gray-500"></div>
                  <div>
                    <h4 class="font-medium">Analytics</h4>
                    <p class="text-sm text-gray-400">Usage tracking and reporting</p>
                  </div>
                </div>
                <div class="text-sm">
                  <span id="analytics-status-text" class="text-gray-400">Checking...</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Player Modal -->
  <div id="playerModal" class="hidden fixed inset-0 z-50 flex flex-col">
    <div class="bg-gray-900/95 backdrop-blur-lg p-3 flex flex-wrap justify-between items-center gap-3 border-b border-gray-800">
      <button id="closePlayer" class="w-8 h-8 bg-red-600/80 hover:bg-red-600 flex items-center justify-center text-white font-bold transition-colors">&times;</button>
      <div id="playerTitle" class="flex-1 text-center text-white font-medium truncate px-4">Loading...</div>
      <div class="flex items-center gap-3">
        <div id="tvControls" class="hidden items-center gap-2">
          <span class="text-xs text-gray-400">S</span>
          <input type="number" id="seasonInput" min="1" value="1" class="w-14 py-1 px-2 bg-gray-800 rounded text-center text-white text-sm border border-gray-700">
          <span class="text-xs text-gray-400">E</span>
          <input type="number" id="episodeInput" min="1" value="1" class="w-14 py-1 px-2 bg-gray-800 rounded text-center text-white text-sm border border-gray-700">
          <button id="updateEpisode" class="bg-gray-800 hover:bg-gray-700 text-white py-1 px-3 text-sm transition-colors">▶</button>
        </div>
        <select id="sourceSelect" class="bg-gray-800 border border-gray-700 text-white text-sm"></select>
      </div>
    </div>
    <div class="flex-1 relative">
      <div class="absolute inset-0 flex items-center justify-center">
        <div class="w-16 h-16 border-4 border-white rounded-full animate-spin border-t-transparent"></div>
      </div>
      <iframe sandbox="allow-scripts allow-same-origin allow-presentation" id="videoFrame" class="absolute inset-0 w-full h-full border-0" scrolling="no" allowfullscreen></iframe>
    </div>
  </div>

  <!-- Info Modal -->
  <div id="infoModal" class="info-modal">
    <div class="info-modal-content">
      <div class="info-modal-header">
        <h3 id="infoModalTitle" class="text-xl font-bold"></h3>
        <button id="closeInfoModal" class="text-gray-400 hover:text-white">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="info-modal-body">
        <div class="info-modal-poster">
          <img id="infoModalPoster" src="" alt="" class="w-full">
        </div>
        <div class="info-modal-details">
          <div class="flex items-center gap-4">
            <div class="star-rating text-lg" id="infoModalRating"></div>
            <span id="infoModalScore" class="text-lg"></span>
          </div>
          <div class="info-modal-genres" id="infoModalGenres"></div>
          <p id="infoModalOverview" class="text-gray-300"></p>
          <div class="flex gap-2">
            <button id="infoModalWatchBtn" class="watch-btn">Watch Now</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Initialize particle background
    tsParticles.load("particles", {
      fullScreen: false,
      background: { color: { value: "transparent" } },
      particles: {
        number: { value: 30 },
        color: { value: "#ffffff" },
        shape: { type: "circle" },
        opacity: { value: 0.2 },
        size: { value: { min: 1, max: 3 } },
        move: { enable: true, speed: 0.5, direction: "none", outModes: { default: "bounce" } }
      }
    });

    // Tab navigation with animations
    document.addEventListener('DOMContentLoaded', function() {
      const tabs = document.querySelectorAll('.tab-btn');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          // Remove active class from all tabs
          tabs.forEach(t => {
            t.classList.remove('bg-primary');
            t.classList.add('text-gray-300');
          });
          
          // Add active class to clicked tab
          this.classList.add('bg-primary');
          this.classList.remove('text-gray-300');
          
          // Handle tab content with animations
          const tabId = this.id.split('-')[1];
          
          // First, mark all contents as hidden
          tabContents.forEach(content => {
            content.classList.add('hidden');
            content.classList.remove('visible');
          });
          
          // Then show the selected content with animation
          setTimeout(() => {
            const activeContent = document.getElementById(`content-${tabId}`);
            activeContent.classList.remove('hidden');
            // Force a reflow for animation
            void activeContent.offsetWidth;
            activeContent.classList.add('visible');
            
            // Reinitialize swipers if we're on the stream tab
            if (tabId === 'stream') {
              initializeSwipers();
            }
          }, 100);
        });
      });
      
      // Initialize swipers when DOM loaded
      initializeSwipers();
      
      // Load random movie fact
      loadRandomMovieFact();
    });

    // Cloud status checker - now more minimalist
    let isOnline = false;
    let checkCount = 0;
    let upSince = null;
  
    function updateRetryText() {
      const textEl = document.getElementById("retry-text");
      if (!isOnline && textEl) {
        textEl.textContent = `Retrying connection every 5s...`;
      } else if (isOnline && textEl) {
        textEl.textContent = "";
      }
    }
    
    function updateLastChecked() {
      document.getElementById("last-checked").textContent = new Date().toLocaleTimeString();
    }
    
    function updateUptime() {
      if (isOnline && upSince) {
        const now = new Date();
        const diff = now - upSince;
        const minutes = Math.floor(diff / 60000);
        const hours = Math.floor(minutes / 60);
        
        if (hours > 0) {
          document.getElementById("uptime").textContent = `${hours}h ${minutes % 60}m`;
        } else {
          document.getElementById("uptime").textContent = `${minutes}m`;
        }
      } else {
        document.getElementById("uptime").textContent = "-";
      }
    }
  
    function checkCloudStatus() {
      fetch("https://cloud.pranavsatav.me/status.php", { cache: "no-store" })
        .then((res) => {
          if (res.ok) {
            if (!isOnline) {
              // Just came online
              upSince = new Date();
            }
            
            isOnline = true;
            document.getElementById("cloud-status-indicator").classList.remove("bg-gray-500", "bg-red-500");
            document.getElementById("cloud-status-indicator").classList.add("bg-green-500");
            document.getElementById("cloud-status-text").textContent = "Online";
          } else {
            throw new Error();
          }
        })
        .catch(() => {
          isOnline = false;
          upSince = null;
          document.getElementById("cloud-status-indicator").classList.remove("bg-gray-500", "bg-green-500");
          document.getElementById("cloud-status-indicator").classList.add("bg-red-500");
          document.getElementById("cloud-status-text").textContent = "Offline";
        })
        .finally(() => {
          updateRetryText();
          updateLastChecked();
          updateUptime();
          checkCount++;
        });
    }
  
    setInterval(checkCloudStatus, 5000);
    setInterval(updateUptime, 60000); // Update uptime display every minute
    checkCloudStatus();

    // Movie facts array
    const movieFacts = [
      "The original Psycho (1960) was the first U.S. film to show a toilet flushing on screen.",
      "The Lord of the Rings trilogy took 8 years to make from start to finish.",
      "The Matrix code is actually Japanese sushi recipes scrolling down the screen.",
      "Die Hard was actually based on the novel 'Nothing Lasts Forever' by Roderick Thorp.",
      "The iconic 'I'll be back' line from The Terminator was almost changed to 'I'll come back'.",
      "The Shawshank Redemption was a box office disappointment, making only $16 million during its initial theatrical run.",
      "The 'Wilhelm Scream' sound effect has been used in over 400 films and has become an inside joke among filmmakers.",
      "The original script of Alien described the creature simply as 'THE ALIEN'.",
      "The green code in The Matrix was actually created from Japanese sushi recipes.",
      "The 'lightsaber' sound in Star Wars is a combination of a film projector motor and TV interference.",
      "Darth Vader only has 12 minutes of screen time in the original Star Wars movie.",
      "Stanley Kubrick destroyed most of the props from 2001: A Space Odyssey to prevent them from being used in other films."
    ];
    
    function loadRandomMovieFact() {
      const factIndex = Math.floor(Math.random() * movieFacts.length);
      document.getElementById("randomMovieFact").textContent = movieFacts[factIndex];
    }

    // TMDB API token and elements
    const tmdbToken = "eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI2Y2QyMWU2NDIxNDAwNTdjZDYzNjJiZjI5ZjlhMzNkMiIsIm5iZiI6MTY5MTkzOTQxNi45OTUwMDAxLCJzdWIiOiI2NGQ4ZjI1ODAwMWJiZDAwYzZjN2FmZjYiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.1iAwqbg9q-TXSi6Sb8DPXAAcw29zd02GJarwO7QodcU";
    const searchInput = document.getElementById("movieSearchInput");
    const movieGrid = document.getElementById("movieGrid");
    const searchResultsSection = document.getElementById("searchResultsSection");
    const typeFilter = document.getElementById("typeFilter");
    const genreFilter = document.getElementById("genreFilter");
    const sortFilter = document.getElementById("sortFilter");
    
    let searchDebounce;
    let swipers = {};

    // Player Modal elements
    const playerModal = document.getElementById("playerModal");
    const videoFrame = document.getElementById("videoFrame");
    const closePlayerBtn = document.getElementById("closePlayer");
    const seasonInput = document.getElementById("seasonInput");
    const episodeInput = document.getElementById("episodeInput");
    const updateEpisodeButton = document.getElementById("updateEpisode");
    const sourceSelect = document.getElementById("sourceSelect");
    const tvControls = document.getElementById("tvControls");
    const playerTitle = document.getElementById("playerTitle");
    
    let currentMediaType = null;
    let currentMediaId = null;
    let currentMediaTitle = null;
    let embedSources = [];

    // Initialize all swipers
    function initializeSwipers() {
      // Hero swiper
      swipers.hero = new Swiper('.heroSwiper', {
        slidesPerView: 1,
        spaceBetween: 0,
        centeredSlides: true,
        autoplay: {
          delay: 6000,
          disableOnInteraction: false,
          pauseOnMouseEnter: true
        },
        loop: true,
        effect: 'fade',
        fadeEffect: {
          crossFade: true
        },
        speed: 1500,
        observer: true,
        observeParents: true,
        preventInteractionOnTransition: true,
        watchSlidesProgress: true,
        watchSlidesVisibility: true
      });
      
      // Top 10 swiper
      swipers.top10 = new Swiper('.top10Swiper', {
        slidesPerView: 1.5,
        spaceBetween: 16,
        navigation: {
          nextEl: '.top10Swiper .swiper-button-next',
          prevEl: '.top10Swiper .swiper-button-prev',
        },
        observer: true,
        observeParents: true,
        watchSlidesProgress: true,
        watchSlidesVisibility: true,
        resistanceRatio: 0,
        preventInteractionOnTransition: true,
        breakpoints: {
          640: {
            slidesPerView: 3,
          },
          768: {
            slidesPerView: 4,
          },
          1024: {
            slidesPerView: 5,
          }
        }
      });
      
      // Initialize other swipers with the same configuration
      const swiperSelectors = ['.trendingSwiper', '.newReleasesSwiper', '.horrorSwiper', '.animeSwiper'];
      swiperSelectors.forEach(selector => {
        const id = selector.replace('.', '').replace('Swiper', '');
        swipers[id] = new Swiper(selector, {
          slidesPerView: 2.2,
          spaceBetween: 16,
          freeMode: false,
          watchSlidesProgress: true,
          watchSlidesVisibility: true,
          resistanceRatio: 0,
          preventInteractionOnTransition: true,
          navigation: {
            nextEl: `${selector} .swiper-button-next`,
            prevEl: `${selector} .swiper-button-prev`,
          },
          observer: true,
          observeParents: true,
          breakpoints: {
            640: {
              slidesPerView: 3.2,
            },
            768: {
              slidesPerView: 4.2,
            },
            1024: {
              slidesPerView: 5.2,
            }
          }
        });
      });
      
      // Load content for each section
      fetchHeroSlider();
      fetchTrendingItems();
      fetchNewReleases();
      fetchHorrorMovies();
      fetchAnimeContent();
      fetchTop10Movies();
    }

    // Utility: create URL-friendly slugs
    function slugify(text) {
      return text.toString().toLowerCase()
                 .replace(/\s+/g, '-')
                 .replace(/[^\w\-]+/g, '')
                 .replace(/\-\-+/g, '-')
                 .replace(/^-+/, '')
                 .replace(/-+$/, '');
    }
    
    // Format date to year only
    function formatReleaseYear(dateString) {
      if (!dateString) return 'Unknown';
      return new Date(dateString).getFullYear();
    }
    
    // Get random rating for demo purposes
    function getRandomRating() {
      return (Math.random() * 2 + 7).toFixed(1); // Random rating between 7.0 and 9.0
    }

    // Fetch hero slider content
    function fetchHeroSlider() {
      fetch("https://api.themoviedb.org/3/movie/popular?language=en-US&page=1", {
        headers: {
          Authorization: 'Bearer ' + tmdbToken,
          'Content-Type': 'application/json;charset=utf-8'
        }
      })
      .then(response => response.json())
      .then(data => {
        const heroContainer = document.querySelector('.heroSwiper .swiper-wrapper');
        heroContainer.innerHTML = "";
        
        data.results.slice(0, 5).forEach(movie => {
          const slide = document.createElement('div');
          slide.className = 'swiper-slide';
          
          const backdropUrl = `https://image.tmdb.org/t/p/original${movie.backdrop_path}`;
          
          slide.innerHTML = `
            <img src="${backdropUrl}" class="absolute inset-0 w-full h-full object-cover" alt="${movie.title}">
            <div class="hero-content">
              <div class="max-w-4xl">
                <h2 class="hero-title">${movie.title}</h2>
                <div class="hero-meta">
                  <span class="badge">${formatReleaseYear(movie.release_date)}</span>
                  <div class="hero-rating">
                    <span class="star-rating">${"★".repeat(Math.round(movie.vote_average / 2))}</span>
                    <span>${movie.vote_average.toFixed(1)}</span>
                  </div>
                </div>
                <p class="hero-overview">${movie.overview}</p>
                <div class="hero-actions">
                  <button class="hero-btn hero-btn-primary" data-id="${movie.id}" data-type="movie">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                    </svg>
                    Watch Now
                  </button>
                  <button class="hero-btn hero-btn-secondary" data-id="${movie.id}" data-type="movie">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    More Info
                  </button>
                </div>
              </div>
            </div>
          `;
          
          heroContainer.appendChild(slide);
          
          // Add event listeners to buttons
          slide.querySelector('.hero-btn-primary').addEventListener('click', () => {
            openPlayer({
              id: movie.id,
              title: movie.title,
              media_type: 'movie'
            });
          });
          
          slide.querySelector('.hero-btn-secondary').addEventListener('click', () => {
            showInfoModal({
              id: movie.id,
              title: movie.title,
              media_type: 'movie',
              poster_path: movie.poster_path,
              vote_average: movie.vote_average
            });
          });
        });
        
        swipers.hero.update();
      })
      .catch(err => {
        console.error("Error fetching hero content:", err);
      });
    }

    // Create movie card
    function createMovieCard(item, isSmall = false) {
      const card = document.createElement('div');
      card.className = `swiper-slide movie-card ${isSmall ? 'small-card' : ''}`;
      
      const releaseYear = formatReleaseYear(item.release_date || item.first_air_date);
      const mediaType = item.media_type || (item.first_air_date ? "tv" : "movie");
      const rating = item.vote_average ? item.vote_average.toFixed(1) : getRandomRating();
      const stars = Math.round(rating / 2);
      
      card.innerHTML = `
        <div class="card-content">
          <img src="https://image.tmdb.org/t/p/w342${item.poster_path}" class="w-full aspect-[2/3] object-cover" alt="${item.title || item.name}" />
          <div class="absolute top-2 right-2 number-badge w-8 h-8 flex items-center justify-center text-xs font-bold">
            ${rating}
          </div>
          ${mediaType === 'tv' ? '<span class="absolute top-2 left-2 badge">TV</span>' : ''}
          <div class="card-info">
            <h3 class="card-title">${item.title || item.name}</h3>
            <div class="card-meta">
              <span>${releaseYear}</span>
              <span>•</span>
              <div class="star-rating">${"★".repeat(stars)}${"☆".repeat(5-stars)}</div>
              <span>${rating}</span>
            </div>
            <div class="card-actions">
              <button class="watch-btn" data-id="${item.id}" data-type="${mediaType}" data-title="${item.title || item.name}">Watch Now</button>
            </div>
          </div>
        </div>
      `;
      
      // Add click handler to the watch button
      card.querySelector('.watch-btn').addEventListener('click', (e) => {
        e.stopPropagation();
        openPlayer({
          id: item.id,
          title: item.title || item.name,
          media_type: mediaType,
          poster_path: item.poster_path
        });
      });
      
      return card;
    }

    // Render movies/series into the dropdown for search results
    function renderMovies(items) {
      const searchDropdown = document.getElementById('searchDropdown');
      searchDropdown.innerHTML = "";
      searchDropdown.classList.remove('hidden');
      
      if (!items || items.length === 0) {
        searchDropdown.innerHTML = "<p class='text-center w-full text-gray-300 py-4'>No results found.</p>";
        return;
      }
      
      const validItems = items.filter(item => item.poster_path && (item.media_type === undefined || item.media_type === "movie" || item.media_type === "tv"));
      
      if (validItems.length === 0) {
        searchDropdown.innerHTML = "<p class='text-center w-full text-gray-300 py-4'>No results with valid posters found.</p>";
        return;
      }
      
      validItems.slice(0, 10).forEach(item => {
        const mediaType = item.media_type || (item.first_air_date ? "tv" : "movie");
        const releaseYear = formatReleaseYear(item.release_date || item.first_air_date);
        
        const resultItem = document.createElement('div');
        resultItem.className = 'search-result-item';
        
        resultItem.innerHTML = `
          <img src="https://image.tmdb.org/t/p/w92${item.poster_path}" class="search-result-poster" alt="${item.title || item.name}">
          <div class="search-result-info">
            <h3 class="search-result-title">${item.title || item.name}</h3>
            <div class="search-result-meta">
              <span>${releaseYear}</span>
              <span>•</span>
              <span>${mediaType === 'tv' ? 'TV Show' : 'Movie'}</span>
              <span>•</span>
              <span>${item.vote_average ? item.vote_average.toFixed(1) : getRandomRating()}</span>
            </div>
          </div>
        `;
        
        resultItem.addEventListener('click', () => {
          openPlayer({
            id: item.id,
            title: item.title || item.name,
            media_type: mediaType
          });
          searchDropdown.classList.add('hidden');
          searchInput.value = '';
        });
        
        searchDropdown.appendChild(resultItem);
      });
    }

    // Open the player modal with the selected media
    function openPlayer(mediaItem) {
      console.log("Opening player for:", mediaItem);
      
      // Set current media info
      currentMediaType = mediaItem.media_type === "tv" ? "tv" : "movie";
      currentMediaId = mediaItem.id;
      currentMediaTitle = mediaItem.title;
      
      // Update modal title
      playerTitle.textContent = currentMediaTitle;
      
      // Show/hide TV controls
      if (currentMediaType === "tv") {
        tvControls.classList.remove('hidden');
        tvControls.classList.add('flex');
        seasonInput.value = 1;
        episodeInput.value = 1;
      } else {
        tvControls.classList.add('hidden');
        tvControls.classList.remove('flex');
      }
      
      // Build and populate sources
      buildEmbedSources();
      populateSourceDropdown();
      loadSource(0);
      
      // Show modal
      playerModal.classList.remove('hidden');
      document.body.style.overflow = "hidden";
    }
    
    // Close the player modal
    function closePlayer() {
      playerModal.classList.add('hidden');
      videoFrame.src = "";
      document.body.style.overflow = "";
    }

    // Build embed sources based on current media type and ID
    function buildEmbedSources() {
      let season = seasonInput.value || '1';
      let episode = episodeInput.value || '1';
      
      if (currentMediaType === 'movie') {
        embedSources = [
          { name: "Source 1", url: `https://111movies.com/movie/${currentMediaId}` },
          { name: "Source 2", url: `https://player.videasy.net/movie/${currentMediaId}` }
        ];
      } else if (currentMediaType === 'tv') {
        embedSources = [
          { name: "Source 1", url: `https://111movies.com/tv/${currentMediaId}/${season}/${episode}` },
          { name: "Source 2", url: `https://player.videasy.net/tv/${currentMediaId}/${season}/${episode}` }
        ];
      }
    }

    // Populate the source dropdown
    function populateSourceDropdown() {
      sourceSelect.innerHTML = "";
      embedSources.forEach((source, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = source.name;
        sourceSelect.appendChild(option);
      });
    }

    // Load a specific source
    function loadSource(index) {
      if (index >= 0 && index < embedSources.length) {
        videoFrame.src = embedSources[index].url;
      }
    }

    // Fetch trending movies for section
    function fetchTrendingItems() {
      fetch("https://api.themoviedb.org/3/trending/movie/week", {
        headers: {
          Authorization: 'Bearer ' + tmdbToken,
          'Content-Type': 'application/json;charset=utf-8'
        }
      })
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById('trendingContainer');
        container.innerHTML = "";
        
        data.results.slice(0, 10).forEach(item => {
          if (item.poster_path) {
            container.appendChild(createMovieCard(item));
          }
        });
        
        swipers.trending.update();
      });
    }
    
    // Fetch new releases
    function fetchNewReleases() {
      fetch("https://api.themoviedb.org/3/movie/now_playing?language=en-US&page=1", {
        headers: {
          Authorization: 'Bearer ' + tmdbToken,
          'Content-Type': 'application/json;charset=utf-8'
        }
      })
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById('newReleasesContainer');
        container.innerHTML = "";
        
        data.results.slice(0, 10).forEach(item => {
          if (item.poster_path) {
            container.appendChild(createMovieCard(item));
          }
        });
        
        swipers.newReleases.update();
      });
    }
    
    // Fetch horror movies
    function fetchHorrorMovies() {
      fetch("https://api.themoviedb.org/3/discover/movie?with_genres=27&sort_by=popularity.desc", {
        headers: {
          Authorization: 'Bearer ' + tmdbToken,
          'Content-Type': 'application/json;charset=utf-8'
        }
      })
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById('horrorContainer');
        container.innerHTML = "";
        
        data.results.slice(0, 10).forEach(item => {
          if (item.poster_path) {
            container.appendChild(createMovieCard(item));
          }
        });
        
        swipers.horror.update();
      });
    }
    
    // Fetch anime content (using animation genre as approximation)
    function fetchAnimeContent() {
      fetch("https://api.themoviedb.org/3/discover/movie?with_genres=16&sort_by=popularity.desc", {
        headers: {
          Authorization: 'Bearer ' + tmdbToken,
          'Content-Type': 'application/json;charset=utf-8'
        }
      })
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById('animeContainer');
        container.innerHTML = "";
        
        data.results.slice(0, 10).forEach(item => {
          if (item.poster_path) {
            container.appendChild(createMovieCard(item));
          }
        });
        
        swipers.anime.update();
      });
    }
    
    // Fetch top 10 movies
    function fetchTop10Movies() {
      fetch("https://api.themoviedb.org/3/movie/top_rated?language=en-US&page=1", {
        headers: {
          Authorization: 'Bearer ' + tmdbToken,
          'Content-Type': 'application/json;charset=utf-8'
        }
      })
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById('top10Container');
        container.innerHTML = "";
        
        // Take only top 10
        data.results.slice(0, 10).forEach((item, index) => {
          if (item.poster_path) {
            const card = document.createElement('div');
            card.className = 'swiper-slide cursor-pointer relative group';
            
            card.innerHTML = `
              <div class="relative rounded-lg overflow-hidden bg-gray-800/50 border border-gray-700/30 hover:border-primary transition-all">
                <div class="absolute -left-2 top-4 z-10">
                  <div class="bg-primary text-white font-bold text-lg px-4 py-1 rounded-r-full shadow">
                    #${index + 1}
                  </div>
                </div>
                <img src="https://image.tmdb.org/t/p/w342${item.poster_path}" class="w-full aspect-[2/3] object-cover" alt="${item.title}" />
                <div class="absolute inset-0 bg-gradient-to-t from-black to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end">
                  <div class="p-4">
                    <h3 class="font-bold text-sm md:text-base">${item.title}</h3>
                    <div class="flex items-center gap-2 mt-1">
                      <div class="star-rating text-xs">${"★".repeat(Math.round(item.vote_average / 2))}</div>
                      <span class="text-xs">${item.vote_average.toFixed(1)}</span>
                    </div>
                  </div>
                </div>
              </div>
            `;
            
            card.addEventListener('click', () => {
              openPlayer({
                id: item.id,
                title: item.title,
                media_type: 'movie'
              });
            });
            
            container.appendChild(card);
          }
        });
        
        // Update the swiper
        swipers.top10.update();
      })
      .catch(err => {
        console.error("Error fetching top 10 movies:", err);
      });
    }

    // Perform a search for movies/series
    function performMovieSearch(query) {
      if (!query) {
        searchResultsSection.classList.add('hidden');
        return;
      }
      
      console.log("Searching for:", query);
      // Display loading message
      movieGrid.innerHTML = `
        <div class="flex justify-center items-center h-48 w-full col-span-full">
          <div class="text-center">
            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span class="text-gray-300">Searching...</span>
          </div>
        </div>
      `;
      
      // Get filter values
      const type = typeFilter.value;
      const genre = genreFilter.value;
      const sort = sortFilter.value;
      
      // Determine which API to use based on type filter
      let endpoint = "search/multi";
      let params = `query=${encodeURIComponent(query)}&include_adult=false`;
      
      if (type !== 'all' && !query) {
        endpoint = `discover/${type}`;
        params = `sort_by=${sort}`;
        if (genre !== 'all') {
          params += `&with_genres=${genre}`;
        }
      }
      
      fetch(`https://api.themoviedb.org/3/${endpoint}?${params}&language=en-US&page=1`, {
        headers: {
          Authorization: 'Bearer ' + tmdbToken,
          'Content-Type': 'application/json;charset=utf-8'
        }
      })
      .then(response => response.json())
      .then(data => {
        console.log("Search results:", data);
        
        // Filter results based on type if needed
        let results = data.results;
        if (endpoint === 'search/multi' && type !== 'all') {
          results = results.filter(item => item.media_type === type);
        }
        
        renderMovies(results);
      })
      .catch(err => {
        console.error("Error fetching search results:", err);
        movieGrid.innerHTML = `<p class="text-center w-full col-span-full text-red-400 py-8">Error searching: ${err.message}</p>`;
      });
    }

    // Event Listeners
    
    // Search input with debounce
    searchInput.addEventListener("input", () => {
      clearTimeout(searchDebounce);
      searchDebounce = setTimeout(() => {
        performMovieSearch(searchInput.value.trim());
      }, 300);
    });
    
    // Filter change handlers
    typeFilter.addEventListener('change', () => {
      if (searchInput.value.trim()) {
        performMovieSearch(searchInput.value.trim());
      }
    });
    
    genreFilter.addEventListener('change', () => {
      if (searchInput.value.trim()) {
        performMovieSearch(searchInput.value.trim());
      }
    });
    
    sortFilter.addEventListener('change', () => {
      if (searchInput.value.trim()) {
        performMovieSearch(searchInput.value.trim());
      }
    });
    
    // Category card click handlers
    document.querySelectorAll('#content-categories [data-genre]').forEach(card => {
      card.addEventListener('click', () => {
        // Switch to the stream tab
        document.getElementById('tab-stream').click();
        
        // Set the genre filter to this genre
        genreFilter.value = card.getAttribute('data-genre');
        
        // Clear the search input and trigger a genre-based search
        searchInput.value = '';
        performMovieSearch('');
      });
    });

    // Close player when clicking the close button
    closePlayerBtn.addEventListener("click", closePlayer);
    
    // Change source when selecting a different one
    sourceSelect.addEventListener('change', function() {
      loadSource(parseInt(this.value, 10));
    });
    
    // Update episode button click
    updateEpisodeButton.addEventListener('click', function() {
      buildEmbedSources();
      populateSourceDropdown();
      loadSource(sourceSelect.value ? parseInt(sourceSelect.value, 10) : 0);
    });
    
    // Keyboard shortcuts for player navigation
    document.addEventListener('keydown', function(e) {
      // Only process if player modal is open and we're in TV mode
      if (!playerModal.classList.contains("active") || currentMediaType !== "tv") return;
      
      if (e.key === 'Escape') {
        closePlayer();
      } else if (e.key === 'ArrowRight') {
        // Next episode
        episodeInput.value = parseInt(episodeInput.value, 10) + 1;
        updateEpisodeButton.click();
      } else if (e.key === 'ArrowLeft') {
        // Previous episode (if we're not at episode 1)
        if (parseInt(episodeInput.value, 10) > 1) {
          episodeInput.value = parseInt(episodeInput.value, 10) - 1;
          updateEpisodeButton.click();
        }
      } else if (e.key === 'ArrowUp') {
        // Next season
        seasonInput.value = parseInt(seasonInput.value, 10) + 1;
        episodeInput.value = 1; // Reset episode to 1
        updateEpisodeButton.click();
      } else if (e.key === 'ArrowDown') {
        // Previous season (if we're not at season 1)
        if (parseInt(seasonInput.value, 10) > 1) {
          seasonInput.value = parseInt(seasonInput.value, 10) - 1;
          episodeInput.value = 1; // Reset episode to 1
          updateEpisodeButton.click();
        }
      }
    });
    
    // Close modal if clicking outside of content
    window.addEventListener('click', function(e) {
      if (e.target === playerModal) {
        closePlayer();
      }
    });

    // On initial load, show trending items
    window.addEventListener("DOMContentLoaded", () => {
      console.log("DOM loaded, fetching trending items");
      fetchTrendingItems();
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
      const searchDropdown = document.getElementById('searchDropdown');
      const searchInput = document.getElementById('movieSearchInput');
      
      if (!searchInput.contains(e.target) && !searchDropdown.contains(e.target)) {
        searchDropdown.classList.add('hidden');
      }
    });

    // Performance optimizations
    let lastScrollTime = 0;
    const scrollThrottle = 100; // ms
    
    // Debounce function for better performance
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
    
    // Throttle function for scroll events
    function throttle(func, limit) {
      let inThrottle;
      return function(...args) {
        if (!inThrottle) {
          func.apply(this, args);
          inThrottle = true;
          setTimeout(() => inThrottle = false, limit);
        }
      }
    }
    
    // Optimized scroll handler
    const handleScroll = throttle(() => {
      const now = Date.now();
      if (now - lastScrollTime >= scrollThrottle) {
        lastScrollTime = now;
        // Update swiper positions
        Object.values(swipers).forEach(swiper => {
          if (swiper && swiper.update) {
            swiper.update();
          }
        });
      }
    }, scrollThrottle);
    
    // Add scroll listener
    window.addEventListener('scroll', handleScroll, { passive: true });
    
    // Initialize category swipers
    function initializeCategorySwipers() {
      document.querySelectorAll('.categorySwiper').forEach((element, index) => {
        const genreId = element.closest('[data-genre]')?.getAttribute('data-genre');
        if (genreId) {
          fetch(`https://api.themoviedb.org/3/discover/movie?with_genres=${genreId}&sort_by=popularity.desc`, {
            headers: {
              Authorization: 'Bearer ' + tmdbToken,
              'Content-Type': 'application/json;charset=utf-8'
            }
          })
          .then(response => response.json())
          .then(data => {
            const wrapper = element.querySelector('.swiper-wrapper');
            wrapper.innerHTML = '';
            
            data.results.slice(0, 5).forEach(movie => {
              if (movie.poster_path) {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                slide.innerHTML = `
                  <div class="rounded-lg overflow-hidden bg-gray-800/50 border border-gray-700/30 h-full">
                    <img src="https://image.tmdb.org/t/p/w342${movie.poster_path}" class="w-full h-full object-cover" alt="${movie.title}">
                  </div>
                `;
                wrapper.appendChild(slide);
              }
            });
            
            new Swiper(element, {
              slidesPerView: 2.2,
              spaceBetween: 10,
              freeMode: true,
              observer: true,
              observeParents: true
            });
          });
        }
      });
    }
    
    // Initialize collection swipers
    function initializeCollectionSwipers() {
      document.querySelectorAll('.collectionSwiper').forEach((element, index) => {
        // Add collection-specific API calls here
        // Similar to category swipers but for collections
      });
    }
    
    // Update tab click handler to initialize category swipers
    document.querySelectorAll('.tab-btn').forEach(tab => {
      tab.addEventListener('click', function() {
        const tabId = this.id.split('-')[1];
        if (tabId === 'categories') {
          return; // Skip categories tab
        }
        // ... rest of the tab click handler
      });
    });

    // Initialize category folders
    function initializeCategoryFolders() {
      document.querySelectorAll('.category-folder-header').forEach(header => {
        header.addEventListener('click', () => {
          const folder = header.parentElement;
          folder.classList.toggle('expanded');
          const arrow = header.querySelector('svg');
          arrow.style.transform = folder.classList.contains('expanded') ? 'rotate(180deg)' : 'rotate(0)';
          
          // Initialize swiper when folder is expanded
          if (folder.classList.contains('expanded')) {
            const swiperId = folder.querySelector('.swiper').classList[1];
            if (!swipers[swiperId]) {
              initializeCollectionSwiper(swiperId);
            }
          }
        });
      });
    }

    // Initialize collection swiper
    function initializeCollectionSwiper(swiperId) {
      let endpoint, params;
      
      switch(swiperId) {
        case 'harryPotterSwiper':
          endpoint = 'search/movie';
          params = 'query=Harry+Potter&include_adult=false';
          break;
        case 'kdramaSwiper':
          endpoint = 'discover/tv';
          params = 'with_original_language=ko&sort_by=popularity.desc';
          break;
      }
      
      fetch(`https://api.themoviedb.org/3/${endpoint}?${params}`, {
        headers: {
          Authorization: 'Bearer ' + tmdbToken,
          'Content-Type': 'application/json;charset=utf-8'
        }
      })
      .then(response => response.json())
      .then(data => {
        const wrapper = document.querySelector(`.${swiperId} .swiper-wrapper`);
        wrapper.innerHTML = '';
        
        data.results.slice(0, 10).forEach(item => {
          if (item.poster_path) {
            const slide = document.createElement('div');
            slide.className = 'swiper-slide';
            slide.innerHTML = `
              <div class="rounded-lg overflow-hidden bg-gray-800/50 border border-gray-700/30 h-full">
                <img src="https://image.tmdb.org/t/p/w342${item.poster_path}" class="w-full h-full object-cover" alt="${item.title || item.name}">
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 hover:opacity-100 transition-opacity flex items-end p-3">
                  <button class="watch-btn" data-id="${item.id}" data-type="${item.media_type || 'movie'}" data-title="${item.title || item.name}">
                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                    </svg>
                    Watch Now
                  </button>
                </div>
              </div>
            `;
            
            // Add click handler to the watch button
            slide.querySelector('.watch-btn').addEventListener('click', () => {
              openPlayer({
                id: item.id,
                title: item.title || item.name,
                media_type: item.media_type || 'movie'
              });
            });
            
            wrapper.appendChild(slide);
          }
        });
        
        swipers[swiperId] = new Swiper(`.${swiperId}`, {
          slidesPerView: 2.2,
          spaceBetween: 16,
          navigation: {
            nextEl: `.${swiperId} .swiper-button-next`,
            prevEl: `.${swiperId} .swiper-button-prev`,
          },
          observer: true,
          observeParents: true,
          watchSlidesProgress: true,
          watchSlidesVisibility: true,
          breakpoints: {
            640: {
              slidesPerView: 3.2,
            },
            768: {
              slidesPerView: 4.2,
            },
            1024: {
              slidesPerView: 5.2,
            }
          }
        });
      });
    }

    // Track recent activity
    let recentActivity = JSON.parse(localStorage.getItem('recentActivity') || '[]');

    function addToRecentActivity(mediaItem) {
      const activity = {
        id: mediaItem.id,
        title: mediaItem.title,
        type: mediaItem.media_type,
        poster_path: mediaItem.poster_path,
        timestamp: Date.now()
      };
      
      // Remove if already exists
      recentActivity = recentActivity.filter(item => item.id !== activity.id);
      // Add to beginning
      recentActivity.unshift(activity);
      // Keep only last 5
      recentActivity = recentActivity.slice(0, 5);
      
      localStorage.setItem('recentActivity', JSON.stringify(recentActivity));
      updateRecentActivityDisplay();
    }

    function updateRecentActivityDisplay() {
      const container = document.getElementById('recentActivityList');
      container.innerHTML = '';
      
      recentActivity.forEach(activity => {
        const item = document.createElement('div');
        item.className = 'recent-activity-item';
        item.innerHTML = `
          <img src="https://image.tmdb.org/t/p/w92${activity.poster_path}" class="w-12 h-16 object-cover rounded" alt="${activity.title}" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'92\\' height=\\'138\\' viewBox=\\'0 0 92 138\\'%3E%3Crect width=\\'92\\' height=\\'138\\' fill=\\'%23212121\\'/%3E%3Ctext x=\\'50%25\\' y=\\'50%25\\' font-family=\\'Arial\\' font-size=\\'14\\' fill=\\'white\\' text-anchor=\\'middle\\' dominant-baseline=\\'middle\\'%3ENo Image%3C/text%3E%3C/svg%3E';">
          <div class="flex-1">
            <h4 class="font-medium">${activity.title}</h4>
            <p class="text-sm text-gray-400">${new Date(activity.timestamp).toLocaleDateString()}</p>
          </div>
          <button class="watch-btn" data-id="${activity.id}" data-type="${activity.type}" data-title="${activity.title}">
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
            </svg>
            Watch Again
          </button>
        `;
        
        // Add click handler to the watch button
        item.querySelector('.watch-btn').addEventListener('click', () => {
          openPlayer({
            id: activity.id,
            title: activity.title,
            media_type: activity.type,
            poster_path: activity.poster_path
          });
        });
        
        container.appendChild(item);
      });
    }

    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      initializeSwipers();
      initializeCategoryFolders();
      updateRecentActivityDisplay();
      loadRandomMovieFact();
    });

    // Info Modal functionality
    const infoModal = document.getElementById('infoModal');
    const closeInfoModal = document.getElementById('closeInfoModal');
    const infoModalTitle = document.getElementById('infoModalTitle');
    const infoModalPoster = document.getElementById('infoModalPoster');
    const infoModalRating = document.getElementById('infoModalRating');
    const infoModalScore = document.getElementById('infoModalScore');
    const infoModalGenres = document.getElementById('infoModalGenres');
    const infoModalOverview = document.getElementById('infoModalOverview');
    const infoModalWatchBtn = document.getElementById('infoModalWatchBtn');

    function showInfoModal(mediaItem) {
      infoModalTitle.textContent = mediaItem.title;
      infoModalPoster.src = `https://image.tmdb.org/t/p/w500${mediaItem.poster_path}`;
      infoModalPoster.alt = mediaItem.title;
      
      const rating = mediaItem.vote_average || getRandomRating();
      const stars = Math.round(rating / 2);
      infoModalRating.innerHTML = "★".repeat(stars) + "☆".repeat(5-stars);
      infoModalScore.textContent = rating.toFixed(1);
      
      // Fetch genres
      fetch(`https://api.themoviedb.org/3/${mediaItem.media_type}/${mediaItem.id}`, {
        headers: {
          Authorization: 'Bearer ' + tmdbToken,
          'Content-Type': 'application/json;charset=utf-8'
        }
      })
      .then(response => response.json())
      .then(data => {
        infoModalGenres.innerHTML = data.genres.map(genre => 
          `<span class="info-modal-genre">${genre.name}</span>`
        ).join('');
        infoModalOverview.textContent = data.overview;
      });
      
      infoModalWatchBtn.onclick = () => {
        closeInfoModal.click();
        openPlayer(mediaItem);
      };
      
      infoModal.classList.add('active');
    }

    closeInfoModal.addEventListener('click', () => {
      infoModal.classList.remove('active');
    });

    // Update categories tab content
    function updateCategoriesTab() {
      const categoriesContent = document.getElementById('content-categories');
      
      // Recent Watches Section
      const recentWatches = document.createElement('div');
      recentWatches.className = 'recent-watches';
      recentWatches.innerHTML = `
        <h3 class="text-xl font-bold mb-4">Recent Watches</h3>
        <div class="recent-watches-grid" id="recentWatchesGrid"></div>
      `;
      categoriesContent.insertBefore(recentWatches, categoriesContent.firstChild);
      
      // Update recent watches grid
      updateRecentWatchesGrid();
      
      // Categories Grid
      const categoriesGrid = document.createElement('div');
      categoriesGrid.className = 'categories-grid';
      categoriesGrid.innerHTML = `
        <div class="category-card" style="background-image: url('https://image.tmdb.org/t/p/w500/1GqKJQJQJQJQJQJQJQJQJQJQJQJQ.jpg')">
          <div class="category-card-content">
            <h3 class="category-card-title">Harry Potter Collection</h3>
            <p class="category-card-description">Magical journeys through Hogwarts and beyond</p>
            <div class="category-card-meta">
              <span>8 Movies</span>
              <span>•</span>
              <span>1997-2011</span>
            </div>
          </div>
        </div>
        <div class="category-card" style="background-image: url('https://image.tmdb.org/t/p/w500/1GqKJQJQJQJQJQJQJQJQJQJQJQJQJ.jpg')">
          <div class="category-card-content">
            <h3 class="category-card-title">Popular K-Dramas</h3>
            <p class="category-card-description">Top Korean dramas and series</p>
            <div class="category-card-meta">
              <span>12 Series</span>
              <span>•</span>
              <span>Latest Releases</span>
            </div>
          </div>
        </div>
        <!-- Add more category cards as needed -->
      `;
      categoriesContent.appendChild(categoriesGrid);
    }

    function updateRecentWatchesGrid() {
      const grid = document.getElementById('recentWatchesGrid');
      grid.innerHTML = '';
      
      recentActivity.forEach(activity => {
        const item = document.createElement('div');
        item.className = 'recent-watch-item';
        item.innerHTML = `
          <img src="https://image.tmdb.org/t/p/w342${activity.poster_path}" class="w-full h-full object-cover" alt="${activity.title}" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'342\\' height=\\'513\\' viewBox=\\'0 0 342 513\\'%3E%3Crect width=\\'342\\' height=\\'513\\' fill=\\'%23212121\\'/%3E%3Ctext x=\\'50%25\\' y=\\'50%25\\' font-family=\\'Arial\\' font-size=\\'14\\' fill=\\'white\\' text-anchor=\\'middle\\' dominant-baseline=\\'middle\\'%3ENo Image%3C/text%3E%3C/svg%3E';">
          <div class="recent-watch-info">
            <h4 class="recent-watch-title">${activity.title}</h4>
            <p class="recent-watch-date">${new Date(activity.timestamp).toLocaleDateString()}</p>
          </div>
        `;
        
        item.addEventListener('click', () => {
          openPlayer({
            id: activity.id,
            title: activity.title,
            media_type: activity.type,
            poster_path: activity.poster_path
          });
        });
        
        grid.appendChild(item);
      });
    }

    // Status page functionality
    async function checkNextCloudStatus() {
      try {
        const startTime = performance.now();
        const response = await fetch('https://cloud.pranavsatav.me/status.php', { cache: 'no-store' });
        const endTime = performance.now();
        const responseTime = Math.round(endTime - startTime);
        
        const statusIndicator = document.getElementById('nextcloud-status');
        const statusText = document.getElementById('nextcloud-status-text');
        
        if (response.ok) {
          statusIndicator.className = 'w-2 h-2 rounded-full bg-green-500';
          statusText.className = 'text-sm text-green-400';
          statusText.textContent = 'Operational';
        } else {
          statusIndicator.className = 'w-2 h-2 rounded-full bg-red-500';
          statusText.className = 'text-sm text-red-400';
          statusText.textContent = 'Not Operational';
        }
        
        return responseTime;
      } catch (error) {
        const statusIndicator = document.getElementById('nextcloud-status');
        const statusText = document.getElementById('nextcloud-status-text');
        statusIndicator.className = 'w-2 h-2 rounded-full bg-red-500';
        statusText.className = 'text-sm text-red-400';
        statusText.textContent = 'Not Operational';
        return null;
      }
    }
    
    async function checkTMDBStatus() {
      try {
        const startTime = performance.now();
        const response = await fetch('https://api.themoviedb.org/3/movie/popular?language=en-US&page=1', {
          headers: {
            Authorization: 'Bearer ' + tmdbToken,
            'Content-Type': 'application/json;charset=utf-8'
          }
        });
        const endTime = performance.now();
        const responseTime = Math.round(endTime - startTime);
        
        const statusIndicator = document.getElementById('api-status-indicator');
        const statusText = document.getElementById('tmdb-status');
        const latencyText = document.getElementById('tmdb-latency');
        
        if (response.ok) {
          statusIndicator.className = 'w-2 h-2 rounded-full bg-green-500';
          statusText.textContent = 'Operational';
          latencyText.textContent = `${responseTime}ms`;
        } else {
          statusIndicator.className = 'w-2 h-2 rounded-full bg-red-500';
          statusText.textContent = 'Not Operational';
          latencyText.textContent = '-';
        }
      } catch (error) {
        const statusIndicator = document.getElementById('api-status-indicator');
        const statusText = document.getElementById('tmdb-status');
        const latencyText = document.getElementById('tmdb-latency');
        statusIndicator.className = 'w-2 h-2 rounded-full bg-red-500';
        statusText.textContent = 'Not Operational';
        latencyText.textContent = '-';
      }
    }
    
    async function getServerIP() {
      try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        document.getElementById('server-ip').textContent = data.ip;
      } catch (error) {
        document.getElementById('server-ip').textContent = 'Unknown';
      }
    }
    
    async function updateAnalytics() {
      try {
        // Get visitor count from localStorage
        let visitorCount = localStorage.getItem('visitorCount') || 0;
        visitorCount = parseInt(visitorCount) + 1;
        localStorage.setItem('visitorCount', visitorCount);
        
        // Get active users (sessions in last 5 minutes)
        const activeUsers = Math.floor(Math.random() * 10) + 1; // Simulated for now
        
        document.getElementById('active-users').textContent = activeUsers;
        document.getElementById('cdn-traffic').textContent = visitorCount;
        
        const statusIndicator = document.getElementById('analytics-status');
        const statusText = document.getElementById('analytics-status-text');
        statusIndicator.className = 'w-2 h-2 rounded-full bg-green-500';
        statusText.className = 'text-sm text-green-400';
        statusText.textContent = 'Operational';
      } catch (error) {
        const statusIndicator = document.getElementById('analytics-status');
        const statusText = document.getElementById('analytics-status-text');
        statusIndicator.className = 'w-2 h-2 rounded-full bg-red-500';
        statusText.className = 'text-sm text-red-400';
        statusText.textContent = 'Not Operational';
      }
    }
    
    async function updateStatusPage() {
      // Update last updated timestamp
      document.getElementById('last-updated').textContent = new Date().toLocaleTimeString();
      
      // Check NextCloud status and get response time
      const responseTime = await checkNextCloudStatus();
      if (responseTime !== null) {
        document.getElementById('response-time').textContent = `${responseTime}ms`;
      } else {
        document.getElementById('response-time').textContent = 'Unknown';
      }
      
      // Check TMDB API status
      await checkTMDBStatus();
      
      // Get server IP
      await getServerIP();
      
      // Update analytics
      await updateAnalytics();
      
      // Update overall status bar
      updateStatusBar();
    }
    
    function updateStatusBar() {
      const statusBar = document.getElementById('status-bar');
      const redBar = statusBar.nextElementSibling;
      const yellowBar = redBar.nextElementSibling;
      
      // Check if any service is down
      const isNextCloudDown = document.getElementById('nextcloud-status').classList.contains('bg-red-500');
      const isTMDBDown = document.getElementById('api-status-indicator').classList.contains('bg-red-500');
      const isAnalyticsDown = document.getElementById('analytics-status').classList.contains('bg-red-500');
      
      if (isNextCloudDown || isTMDBDown || isAnalyticsDown) {
        statusBar.classList.add('hidden');
        redBar.classList.remove('hidden');
        yellowBar.classList.add('hidden');
      } else {
        statusBar.classList.remove('hidden');
        redBar.classList.add('hidden');
        yellowBar.classList.add('hidden');
      }
    }
    
    // Initialize status page updates
    setInterval(updateStatusPage, 5000);
    updateStatusPage();
  </script>
</body>
</html>
